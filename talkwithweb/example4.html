<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>example4</title>
</head>

<body>
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>
    <script>
        var flag = true;
        document.getElementById("fade-btn").onclick = function(){
            var slowout = function(){
                document.getElementById("fade-obj").style.opacity -= 0.05;
                if (document.getElementById("fade-obj").style.opacity > 0){
                    setTimeout(slowout,50);
                }else{
                    document.getElementById("fade-btn").disabled = false;
                    document.getElementById("fade-btn").innerText = "淡入";
                }
            }
            var slowin = function(){
                document.getElementById("fade-obj").style.opacity -= -0.05;
                if (document.getElementById("fade-obj").style.opacity < 1){
                    setTimeout(slowin,50);
                }else{
                    document.getElementById("fade-btn").disabled = false;
                    document.getElementById("fade-btn").innerText = "淡出";
                }
            }

            if (flag){
                document.getElementById("fade-obj").style.opacity = 1.0;
                slowout();
            }else{
                document.getElementById("fade-obj").style.opacity = 0.0;
                slowin();
            }
            
            document.getElementById("fade-btn").disabled = true;
            flag = !flag;
        }
    </script>
</body>

</html>